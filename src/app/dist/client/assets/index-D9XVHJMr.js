import{c as v,u as w,a as C,r as o,j as e,aF as L,I as S,e as u,B as n,d as h,A as k,a7 as p,aG as I,aH as T,t as i}from"./main-oBfCarfk.js";import{C as f,b as F,a as A}from"./card-C5iuDLNY.js";import{S as B}from"./search-D4fCj5l3.js";const M=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],O=v("package-open",M);function E(){const l=w(),{currentUser:a}=C(),[g,j]=o.useState([]),[b,c]=o.useState(!0),[r,y]=o.useState(""),[d,m]=o.useState(null);o.useEffect(()=>{async function s(){if(a?.id){c(!0);try{const t=await I({data:{creatorId:a.id}});t.success&&j(t.templates||[])}catch(t){console.error("Failed to fetch store templates:",t)}finally{c(!1)}}}s()},[a?.id]);const x=g.filter(s=>s.title.toLowerCase().includes(r.toLowerCase())||s.description?.toLowerCase().includes(r.toLowerCase())||s.creatorName?.toLowerCase().includes(r.toLowerCase())),N=async s=>{if(a?.id){m(s.id);try{const t=await T({data:{templateId:s.id,creatorId:a.id}});t.success?(i.success("Template added to your library!"),l({to:"/creator/library"})):i.error(t.error||"Failed to clone template")}catch(t){console.error("Clone store template error:",t),i.error("Failed to clone template")}finally{m(null)}}};return e.jsxs("div",{className:"container max-w-7xl mx-auto py-8 px-4",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(L,{className:"w-8 h-8 text-violet-500"}),"Project Store"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Browse and clone project templates shared by creators"})]})}),e.jsxs("div",{className:"relative mb-8",children:[e.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(S,{placeholder:"Search templates by title, description, or creator...",value:r,onChange:s=>y(s.target.value),className:"pl-10 h-12 bg-card border-border"})]}),b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(u,{className:"w-10 h-10 animate-spin text-violet-500 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading store templates..."})]}):x.length===0?e.jsxs(f,{className:"border-dashed py-20 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(O,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No templates in the store"}),e.jsx("p",{className:"text-muted-foreground max-w-sm mb-6",children:r?`No templates matching "${r}"`:"No creators have published templates yet. You can publish your own from the library!"}),!r&&e.jsx(n,{onClick:()=>l({to:"/creator/library"}),variant:"outline",children:"Go to Library"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(s=>e.jsxs(f,{className:"bg-card border-border hover:border-violet-500/50 transition-all group",children:[e.jsxs(F,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(h,{variant:"secondary",className:"bg-violet-500/10 text-violet-500 border-none",children:"Shared Template"}),s.isOwn&&e.jsx(h,{variant:"secondary",className:"bg-cyan-500/10 text-cyan-500 border-none",children:"Yours"})]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.sessionCount," sessions"]})]}),e.jsx("h3",{className:"text-lg font-semibold text-foreground line-clamp-1 group-hover:text-violet-500 transition-colors cursor-pointer",onClick:()=>l({to:"/creator/store/$id",params:{id:s.id}}),children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:s.description||s.drivingQuestion})]}),e.jsxs(A,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsxs("span",{children:["by ",s.creatorName,s.isOwn?" (you)":""]})]}),s.isOwn?e.jsxs(n,{variant:"outline",className:"w-full",onClick:()=>l({to:"/creator/library"}),children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"View in Library"]}):e.jsx(n,{className:"w-full bg-violet-600 hover:bg-violet-700 text-white",onClick:()=>N(s),disabled:d===s.id,children:d===s.id?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-4 h-4 mr-2 animate-spin"}),"Cloning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Add to Library"]})})]})]},s.id))})]})}function G(){return e.jsx(E,{})}export{G as component};
