import{a as _,r as t,j as e,e as x,S as O,B as y,ba as R,k as S,I as w,y as U,C as T,bb as P,bc as z,bd as G,t as o,be as H}from"./main-oBfCarfk.js";import{S as C}from"./settings-0j8GZIA_.js";import{C as K,b as Y,c as q,d as J,a as Q}from"./card-C5iuDLNY.js";import{L as M}from"./label-D--meCET.js";import{C as V}from"./circle-alert-CGSAmO4T.js";import{B as W}from"./bot-BcYbSF8r.js";import{S as X}from"./search-D4fCj5l3.js";function ne(){const{currentUser:L}=_(),[k,A]=t.useState(!0),[u,d]=t.useState(!1),[h,f]=t.useState(null),[a,c]=t.useState(""),[I,g]=t.useState(""),[j,p]=t.useState(null),[E,F]=t.useState([]),[i,N]=t.useState(!0),[l,B]=t.useState(""),v=async()=>{N(!0);try{const s=await G();if(s.success){const r=(s.models||[]).sort((n,m)=>n.name.localeCompare(m.name));F(r)}else console.error("Failed to fetch models:",s.error)}catch(s){console.error("Error fetching models:",s)}finally{N(!1)}};t.useEffect(()=>{async function s(){try{const r=await z();if(r.success){const n=r.settings.find(m=>m.key===C.AI_MODEL);n&&(c(n.value),g(n.value),p(n.updatedAt))}else f(r.error)}catch{f("Failed to load settings")}finally{A(!1)}}s(),v()},[]);const D=async()=>{d(!0);try{if(!a){o.error("Please select an AI model"),d(!1);return}const s=await H({data:{key:C.AI_MODEL,value:a,updatedBy:L?.id}});s.success?(g(a),p(s.setting.updatedAt),o.success("Settings saved successfully")):o.error(s.error)}catch{o.error("Failed to save settings")}finally{d(!1)}},b=E.filter(s=>s.id.toLowerCase().includes(l.toLowerCase())||s.name.toLowerCase().includes(l.toLowerCase()));return k?e.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:e.jsx(x,{className:"w-8 h-8 animate-spin text-cyan-500"})}):h?e.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-xl p-6 text-center",children:[e.jsx(V,{className:"w-8 h-8 text-destructive mx-auto mb-2"}),e.jsx("p",{className:"text-destructive",children:h})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(O,{className:"w-8 h-8 text-cyan-500"}),"System Settings"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure application-wide settings"})]}),e.jsxs(K,{className:"bg-card border-border",children:[e.jsxs(Y,{children:[e.jsxs(q,{className:"text-foreground flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-cyan-500"}),"AI Model Configuration"]}),e.jsx(J,{children:"Select the AI model used for generating content, chat responses, and analysis across the platform. Models are fetched from OpenRouter API."})]}),e.jsxs(Q,{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-muted/30 rounded-lg border border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Model"}),e.jsx("p",{className:"font-mono text-foreground text-lg",children:I||"(not set)"})]}),j&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-foreground",children:new Date(j).toLocaleString()})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{className:"text-foreground",children:"Select a Model"}),e.jsxs(y,{variant:"ghost",size:"sm",onClick:v,disabled:i,className:"text-muted-foreground hover:text-foreground",children:[e.jsx(R,{className:S("w-4 h-4 mr-1",i&&"animate-spin")}),"Refresh"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(w,{value:l,onChange:s=>B(s.target.value),placeholder:"Search models...",className:"pl-9 bg-background border-border"})]})]}),e.jsx("div",{className:"border border-border rounded-lg",children:i?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(x,{className:"w-6 h-6 animate-spin text-cyan-500"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading models..."})]}):b.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:l?"No models match your search":"No models available"}):e.jsx(U,{className:"h-[400px]",children:e.jsx("div",{className:"divide-y divide-border",children:b.map(s=>e.jsx("button",{onClick:()=>c(s.id),className:S("w-full p-4 text-left transition-colors hover:bg-muted/50",a===s.id&&"bg-cyan-600/20"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-foreground truncate",children:s.name}),a===s.id&&e.jsx(T,{className:"w-4 h-4 text-cyan-500 shrink-0"})]}),e.jsx("span",{className:"text-xs text-muted-foreground font-mono block truncate",children:s.id})]}),s.context_length&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-4 shrink-0",children:[(s.context_length/1e3).toFixed(0),"k ctx"]})]})},s.id))})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{className:"text-foreground",children:"Or enter a custom model ID"}),e.jsx(w,{value:a,onChange:s=>c(s.target.value),placeholder:"e.g., google/gemini-2.0-flash-001",className:"bg-background border-border font-mono"})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-border",children:e.jsx(y,{onClick:D,disabled:u,className:"bg-cyan-600 hover:bg-cyan-700 text-white",children:u?e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})]})}export{ne as component};
